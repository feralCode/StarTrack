<!doctype html>
<html>
  <head>
    <base href="/">
    <html lang="en" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>StarTrack</title>
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" type="image/png" href="http://fountainjs.io/assets/imgs/fountain.png" />
  
    <!-- build:css({.tmp,src}) styles/vendor.css -->
    <!-- bower:css -->
    <!-- run `gulp inject` to automatically populate bower styles dependencies -->
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:css({.tmp,src}) styles/app.css -->
    <link rel="stylesheet" href="index.css"/>
    <!-- endbuild -->
  </head>


  <body>
    <message-view ng-controller="stChatController">
      <div class="chat-list" >
        <div class="message-item" ng-repeat="msg in messages">
            {{msg.content}}
        </div>
      </div>
    </message-view>

    <st-search-view ng-controller="stSearchController">
      <div class="track-search-bar" >
        <i class="material-icons" ng-click="openMenu()">menu</i>
        <input type="search" 
            placeholder="Search for song"
            ng-model="searchQuery"
            ng-blur="searchActive = false;searchQuery = '';searchResults = [];">
        <i class="material-icons">search</i>
        <!--<i class="material-icons" id="find_me_button">my_location</i>-->
      </div>

      <div ng-class="{'track-search-results-container': !searchActive, 'track-search-results-container active': searchActive}">
          <div id="track-result-list" ng-repeat="track in searchResults">
            <div class="list-item"
                ng-click="playTrack(track);">
                <img ng-src="{{track.albumCoverSm}}" class="track-cover" />
                <div class="track-data">
                  <div class="artist">
                    {{track.artist}}
                  </div>
                  <div class="title">
                    {{track.title}}
                  </div>
                </div>
            </div>
          </div>
      </div>
    </st-search-view>

    <st-player ng-controller="stPlayerController">
      <div class="album-art">
        <img ng-src="{{currentTrack.albumCoverSm}}" />
      </div>
      <!--<div class="login-button" ng-click="login()"></div>-->
      
    </st-player>

    <form class="message-bar" ng-controller="stMessageController" ng-submit="sendMessage()">
      <input class="content" ng-model="messageInput">
      <div class="send-button" ng-click="sendMessage()" ng-if="textInput">
          <i class="material-icons">send</i>
      </div>
      <div class="attach-button" ng-if="!textInput">
        <i class="material-icons">attachment</i>
      </div>
    </form>

  </body>

  <!-- build:js({.tmp,src}) scripts/vendor.js -->
  <!-- bower:js -->
  <!-- run `gulp inject` to automatically populate bower script dependencies -->
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:js({.tmp,src}) scripts/app.js -->
  <!-- inject:js -->
  <!-- js files will be automatically insert here -->
  <!-- endinject -->
  <!-- inject:partials -->
  <!-- angular templates will be automatically converted in js and inserted here -->
  <!-- endinject -->
  <!-- endbuild -->
</html>

